<% layout('layouts/boilerplate') %>

    <link rel="stylesheet" href="/css/app.css">

    <div id="cluster-map" class="mb-2"></div>
    <div class="container">
        <h1>All Campgrounds</h1>
        <% for(let campground of campgrounds){ %>
            <div class="card mb-3">
                <div class="row my-2">
                    <div class="col-md-4">
                        <%if(campground.images.length) {%>
                            <img class="img-fluid" src="<%=campground.images[0].url%> ">
                            <% } else{%>
                                <img class="img-fluid"
                                    src="https://res.cloudinary.com/dbqu3t2ya/image/upload/v1613897547/YelpCamp/l6mrrjtqc7c9n3eagpqo.jpg">
                                <% } %>
                    </div>
                    <div class="col-8">
                        <h5 class="card-title">
                            <%= campground.title%>
                        </h5>
                        <p class="card-text">
                            <%=campground.description%>
                        </p>
                        <p class="card-text"><small class="text-muted">
                                <%=campground.location%>
                            </small></p>
                        <a class="btn btn-primary" href="/campgrounds/<%=campground._id%> ">View <%=campground.title%>
                        </a>
                    </div>
                </div>
            </div>
            <% } %>
    </div>

    <script>
        const mapToken = '<%-process.env.MAPBOX_TOKEN%>';
        const campgrounds = { features: <%-JSON.stringify(campgrounds)%> };
    </script>
    <script src="/js/clusterMap.js"></script>